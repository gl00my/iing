iing
====

iing — нода для ii-сетей нового поколения.

Нода поддерживает следующие стандарты и расширения:
  * метод /e;
  * метод /m;
  * метод /u/e (включая сокращённый индекс);
  * метод /u/m;
  * метод /u/point;
  * метод /x/c;
  * метод /list.txt;
  * метод /blacklist.txt;
  * метод /x/features;
  * метод /x/file;
  * метод /x/small-echolist;
  * метод /x/caesium (возвращает список эхоконференций в формате конфига для клиента caesium);
  * новый формат цитирования (с подстановкой имени или инициалов);
  * имена эхоконференций без индекса (точка в имени по прежнему обязательна);

При каждом запуске нода проверяет наличие всех необходимых директорий и файлов и, в случае отсутствия каких-либо позиций, создаёт их.

Конфигурирование
----------------

Пример файла конфигурации находится в iing.def.cfg и копируется в iing.cfg в случае отсутствия последнего. Формат файла очень простой: первое слово является ключом, в вся остальная строка — значением. Все строки, первые слова которых не являются ключевыми игнорируются при разборе.

Список ключей:
  * nodename: имя ноды, которое будет проставляться в поле адреса и отображаться в заголовке веб-интерфейса;
  * nodedsc: строчка-описание ноды;
  * echo: эхоконференция; данный параметр является составным: первое слово значения является названием эхоконференции, а остальная строка — её описанием;
  * webinterface: включение/отключение веб-интерфейса ноды. Если параметр выставлен в 1 или не задан, то веб-интерфейс доступен. Во всех остальных случаях, он выключен;
  * background: имена графических файлов в директории lib/, разделённые запятой, которые будут выставляться в качестве фона страницы;
  * norobots: не имеет параметров; запрещает индексацию роботам поисковых систем;
  * registration: не имеет параметров; разрешает регистрацию поинтов через веб-интерфейс.

Фетчинг
-------

В директории tools/ есть фетчер. Для его работы необходимы конфигурационные файлы схожего с файлом конфигурации ноды формата.

Список ключей:
  * node: адрес ноды для взаимодействия со слешем в конце (для php-ноды он будет представлять собой что-то вроде http://node.example/ii-point.php?q=/);
  * echo: название эхоконференции (без строки описания).

Фетчер необходимо вызывать из корневой директории iing с указанием файла конфигурации в качестве параметра. Например,

  $ tools/fetcher.py ./mira.cfg